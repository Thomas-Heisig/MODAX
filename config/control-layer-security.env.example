# MODAX Control Layer - Security Configuration Example
# Copy this file to .env and configure with your actual values

# ============================================================================
# MQTT Security Configuration
# ============================================================================

# MQTT Broker Connection
MQTT_BROKER_HOST=localhost
MQTT_BROKER_PORT=1883

# MQTT Authentication
MQTT_USERNAME=control_layer
MQTT_PASSWORD=your_mqtt_password_here

# MQTT TLS/SSL Configuration
MQTT_USE_TLS=false
MQTT_CA_CERTS=/etc/modax/certs/ca.crt
MQTT_CERTFILE=/etc/modax/certs/client.crt
MQTT_KEYFILE=/etc/modax/certs/client.key
MQTT_TLS_INSECURE=false  # Set to true ONLY in development to skip cert verification

# ============================================================================
# API Authentication Configuration
# ============================================================================

# Enable API Key Authentication
API_KEY_ENABLED=false

# API Keys for different clients (generate secure random keys!)
HMI_API_KEY=your_hmi_api_key_here
MONITORING_API_KEY=your_monitoring_api_key_here
ADMIN_API_KEY=your_admin_api_key_here

# ============================================================================
# Secrets Management Configuration
# ============================================================================

# Use HashiCorp Vault for secrets (optional)
USE_VAULT=false
VAULT_ADDR=http://vault:8200
VAULT_TOKEN=your_vault_token_here

# ============================================================================
# Database Configuration (TimescaleDB)
# ============================================================================

# Enable database persistence
DB_ENABLED=false

# Database Connection
DB_HOST=localhost
DB_PORT=5432
DB_NAME=modax
DB_USER=modax_user
DB_PASSWORD=your_db_password_here

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# ============================================================================
# Control Layer API Configuration
# ============================================================================

API_HOST=0.0.0.0
API_PORT=8000

# AI Layer Integration
AI_ENABLED=true
AI_LAYER_URL=http://localhost:8001/analyze
AI_LAYER_TIMEOUT=5

# ============================================================================
# Logging Configuration
# ============================================================================

# Environment (development or production)
ENVIRONMENT=development

# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# Security Notes
# ============================================================================

# 1. NEVER commit this file with real credentials to version control
# 2. Generate strong, random API keys (use: openssl rand -hex 32)
# 3. Use different passwords for each service
# 4. Enable TLS/SSL in production environments
# 5. Consider using HashiCorp Vault for production secrets management
# 6. Regularly rotate passwords and API keys
# 7. Keep audit logs for security compliance
# 8. Monitor failed authentication attempts
